{{- /*
  Partial: ocd/dispatchers/console/markdown.html
  Purpose: Renders the console warnings for markdown errors.

  Repo: https://github.com/oxypteros/alpha
*/}}

{{- /* Dictionary keys */}}
{{- $code := .code | default "ocd-md-000" -}}
{{- $path := .path -}}
{{- $permalink := .permalink -}}
{{- $destination := .destination -}}

{{- /* Declared vars */}}
{{- $title := "" -}}
{{- $reason := "" -}}
{{- $expandedReason := "" -}}
{{- $solution := "" -}}
{{- $docURL := "" -}}
{{- $example := "" -}}
{{- $preDoc := "" -}}

{{- /* Styled variables */}}

{{- $styledWarnKeyValue := printf `<span class="ocd-mono ocd-mono-con-warning">%q</span>` $destination -}}

{{- $styledSolKeyValue := printf `<span class="ocd-mono ocd-mono-con-solution">%s</span>` $destination -}}


{{- /* Invalid Lastmod Date */}}
{{- if eq $code "ocd-md-101" -}}

  {{- $title = i18n "OcdMdImageNotFound" | default "Image Not Found" -}}
  {{- $reasonFormat := i18n "OcdMdImageNotFoundReason" | default "" -}}
  {{- $reason = printf $reasonFormat $styledWarnKeyValue -}}
  {{- $solutionFormat := i18n "OcdMdImageNotFoundSolution" | default "" -}}
  {{- $solution = printf $solutionFormat $styledSolKeyValue -}}
  {{- /* Link */}}
  {{- $docURL = "https://alpha.oxypteros.com/docs/content-creation/page/" -}}
  {{- $preDoc = "markdown" -}}
  {{- /* ocd.js trigger */}}
  <div data-error="{{ $code }}"></div>
{{- end -}}

{{- /* Render the console template */}}
<template data-alpha="{{ $code }}-template">
  <div class="ocd-console-explanation">
    {{- with $title }}
      <h2>
        {{- . -}}
      </h2>
    {{- end }}
    {{- with $reason }}
      <p>
        {{- . | safeHTML -}}
      </p>
    {{- end }}
    {{- with $expandedReason }}
      <p>{{ . }}</p>
    {{- end }}
    <br />
    {{- with $solution }}
      <h3 class="ocd-console-h3">
        {{ i18n "OcdSolution" . | default "Solution:" }}
      </h3>
      <p>{{ . | safeHTML }}</p>
    {{- end }}
    {{- with $example }}
      <div class="ocd-console-example">
        <h3>{{ i18n "OcdExample" . | default "Example:" }}</h3>
        <p class="ocd-mono ocd-mono-con-solution">
          {{- $example | safeHTML }}
        </p>
      </div>
    {{- end }}
  </div>
  <div class="ocd-console-doc">
    <div class="hr hr-left"></div>
    {{- with $docURL }}
      <a href="{{ . }}"
        ><span class="ocd-mono"></span>{{ $preDoc }} {{ i18n "OcdDoc" . }}</a
      >
    {{- end }}
    <div class="hr hr-right"></div>
  </div>
</template>
