{{- /*
  Partial: ocd/components/unique/hero-sc.html
  Purpose: Render the `OCD warn`, `OCD on page`, and `OCD console` warning
  message for error `ocd-sc-112` of the hero shortcode.

  Requires a dictionary expecting the following keys:
  - context (object)       : The page context ( . )
  - errorCode (string)     : The OCD error code
  - scName (string)        : The name of the shortcode.
  - docURL (string)        : The shortcode documentation URL
  - isBtnPairValid (bool)  : The result of the validation for the button pair
  - isLinkPairValid (bool) : The result of the validation for the secondary link pair
  - btnLink (string)       : Value for the `BTN-LINK` parameter
  - btnTxt (string)        : Value for the `BTN-TEXT` parameter.
  - link (string)          : Value for the `LINK` parameter.
  - linkTxt (string)       : Value for the `LINK-TEXT` parameter.

  Repo: https://github.com/oxypteros/alpha
*/}}

{{- $ocdWarnEnabled := .Site.Params.ocdWarn_enabled | default true -}}
{{- $ocdEnabled := and hugo.IsDevelopment (.Site.Params.ocd_enabled | default true) -}}
{{- $context := .context -}}
{{- $docURL := .docURL -}}
{{- $errorCode := .errorCode -}}
{{- $scName := .scName -}}
{{- $isBtnPairValid := .isBtnPairValid -}}
{{- $isLinkPairValid := .isLinkPairValid -}}
{{- $btnLink  := .btnLink -}}
{{- $btnTxt := .btnTxt -}}
{{- $link  := .link -}}
{{- $linkTxt := .linkTxt -}}

{{- if  $ocdWarnEnabled }}

  {{- $errorDetails := slice -}}

  {{- if not .isBtnPairValid -}}
    {{- $detail := "The 'Button' pair is incomplete." -}}
    {{- if $btnTxt -}}
      {{- $detail = printf "The 'Button' pair is missing an URL for its text '%s'." $btnTxt -}}
    {{- else if $btnLink -}}
      {{- $detail = printf "The 'Button' pair is missing text for its URL '%s'." $btnLink -}}
    {{- end -}}
    {{- $errorDetails = $errorDetails | append $detail -}}
  {{- end -}}

  {{- if not .isLinkPairValid -}}
    {{- $detail := "The 'SLink' pair is incomplete." -}}
    {{- if $linkTxt -}}
      {{- $detail = printf "The 'Link' pair is missing an URL for its text '%s'." $linkTxt -}}
    {{- else if $link -}}
      {{- $detail = printf "The 'Link' pair is missing text for its URL '%s'." $link -}}
    {{- end -}}
    {{- $errorDetails = $errorDetails | append $detail -}}
  {{- end -}}


  <!-- prettier-ignore -->
  {{- warnf `
[OCD] Invalid Link Pair in %q Shortcode
─────────────────────────────────────────────────
Code   : %s
Reason : %s
Page   : %s
File   : %s
─────────────────────────────────────────────────
For each link, provide both the URL and the text, 
or remove both.
─────────────────────────────────────────────────`
$scName
$errorCode
(delimit $errorDetails "\n         ")
  $context.Page.Permalink
  $context.Position
-}}
{{- end }}

{{- if $ocdEnabled }}
  {{- $countPairs := 2 -}}
  {{- if or $isLinkPairValid $isBtnPairValid }}
    {{- $countPairs = 1 -}}
  {{- end }}


  <div
    class="ocd ocd ocd-card ocd-card-warning ocd-shadow"
    data-error="{{ $errorCode }}"
  >
    <header class="ocd-card-header ocd-card-header-warning">
      <h2 class="ocd-title">
        {{- i18n "OcdScHeroTitle" $countPairs | default "Incomplete Link/Text Pairs" -}}
      </h2>
      <svg aria-hidden="true" focusable="false" width="24" height="24">
        <use href="#ocd-warning-icon"></use>
      </svg>
    </header>
    <div class="ocd-card-content ocd-card-content-warning">
      <div>
        <p>
          {{- i18n "The" . |default "The" }}
          <span class="ocd-mono ocd-mono-warning"
            >&lbrace;&lbrace;&lt; {{ $scName }} &gt;&rbrace;&rbrace;</span
          >
          {{ i18n "OcdScHeroReason" $countPairs | default "shortcode has one or more incomplete" }}
          <span class="ocd-mono ocd-mono-warning"
            >{{ i18n "OcdScHeroLinkText" . | default "link/text" }}</span
          >
          {{ i18n "OcdScHeroPairs" $countPairs | default "pairs." }}<br />
          {{ i18n "OcdScHeroExplain" . | default "This will cause usability and accessibility issues." }}
        </p>
        <ul>
          {{- if not $isBtnPairValid }}
            <li>
              <strong>{{ i18n "OcdScHeroBtnPair" }}:</strong>
              {{ if $btnTxt -}}
                {{ i18n "OcdScHeroProvided" . | default "You provided" }}
                <span class="ocd-mono ocd-mono-solution"
                  >BTN-TEXT="{{ $btnTxt }}"</span
                >
                {{- i18n "OcdScHeroMissingLink" . | default ", but the corresponding link" }}
                (<span class="ocd-mono ocd-mono-warning">BTN-LINK</span>)
                {{ i18n "OcdScHeroIsMissing" . | default "is missing." }}
              {{- else -}}
                {{ i18n "OcdScHeroProvided" . | default "You provided" }}
                <span class="ocd-mono ocd-mono-solution"
                  >BTN-LINK="{{ $btnLink }}"</span
                >
                {{- i18n "OcdScHeroMissingText" . | default ", but the corresponding text" }}
                (<span class="ocd-mono ocd-mono-warning">BTN-TEXT</span>)
                {{ i18n "OcdScHeroIsMissing" . | default "is missing." }}
              {{- end -}}
            </li>
          {{- end }}
          {{- if not $isLinkPairValid }}
            <li>
              <strong>{{ i18n "OcdScHeroLinkPair" }}:</strong>
              {{ if $linkTxt }}
                {{ i18n "OcdScHeroProvided" . | default "You provided" }}
                <span class="ocd-mono ocd-mono-solution"
                  >LINK-TEXT="{{ $linkTxt }}"</span
                >
                {{- i18n "OcdScHeroMissingLink" . | default ", but the corresponding link" }}
                (<span class="ocd-mono ocd-mono-warning">LINK</span>)
                {{ i18n "OcdScHeroIsMissing" . | default "is missing." }}
              {{- else -}}
                {{ i18n "OcdScHeroProvided" . | default "You provided" }}
                <span class="ocd-mono ocd-mono-solution"
                  >LINK="{{ $link }}"</span
                >
                {{- i18n "OcdScHeroMissingText" . | default ", but the corresponding text" }}
                (<span class="ocd-mono ocd-mono-warning">LINK-TEXT</span>)
                {{ i18n "OcdScHeroIsMissing" . | default "is missing." }}
              {{- end -}}
            </li>
          {{- end }}
        </ul>
      </div>
      <hr />
      <p>
        <span class="ocd-mono ocd-mono-solution">
          {{- i18n "OcdScHeroSolution" -}}</span
        >
      </p>
    </div>
    <footer class="ocd-card-footer ocd-card-footer-warning">
      <div class="ocd-warning-meta">
        <a class="ocd-mono ocd-mono-warning" href="{{ $docURL }}"
          >{{ $scName }} {{ i18n "OcdDoc" }}</a
        >
        <a
          class="ocd-mono ocd-mono-warning"
          href="https://alpha.oxypteros.com/docs/ocd"
          >{{ $errorCode }}</a
        >
      </div>
    </footer>
  </div>

  <template data-alpha="{{ $errorCode }}-template">
    <div class="ocd-console-explanation">
      <h2>
        {{- i18n "OcdScHeroTitle" $countPairs | default "Incomplete Link/Text Pairs" -}}
      </h2>
      <p>
        {{- i18n "The" . |default "The" }}
        <span class="ocd-mono ocd-mono-con-warning"
          >&lbrace;&lbrace;&lt; {{ $scName }} &gt;&rbrace;&rbrace;</span
        >
        {{ i18n "OcdScHeroReason" $countPairs | default "shortcode has one or more incomplete" }}
        <span class="ocd-mono ocd-mono-warning"
          >{{ i18n "OcdScHeroLinkText" . | default "link/text" }}</span
        >
        {{ i18n "OcdScHeroPairs" $countPairs | default "pairs." }}<br />
        {{ i18n "OcdScHeroExplain" . | default "This will cause usability and accessibility issues." }}
      </p>
      <ul>
        {{- if not $isBtnPairValid }}
          <li>
            <strong>{{ i18n "OcdScHeroBtnPair" }}:</strong>
            {{ if $btnTxt -}}
              {{ i18n "OcdScHeroProvided" . | default "You provided" }}
              <span class="ocd-mono ocd-mono-con-solution"
                >BTN-TEXT="{{ $btnTxt }}"</span
              >
              {{- i18n "OcdScHeroMissingLink" . | default ", but the corresponding link" }}
              (<span class="ocd-mono ocd-mono-con-warning">BTN-LINK</span>)
              {{ i18n "OcdScHeroIsMissing" . | default "is missing." }}
            {{- else -}}
              {{ i18n "OcdScHeroProvided" . | default "You provided" }}
              <span class="ocd-mono ocd-mono-con-solution"
                >BTN-LINK="{{ $btnLink }}"</span
              >
              {{- i18n "OcdScHeroMissingText" . | default ", but the corresponding text" }}
              (<span class="ocd-mono ocd-mono-con-warning">BTN-TEXT</span>)
              {{ i18n "OcdScHeroIsMissing" . | default "is missing." }}
            {{- end -}}
          </li>
        {{- end }}
        {{- if not $isLinkPairValid }}
          <li>
            <strong>{{ i18n "OcdScHeroLinkPair" }}:</strong>
            {{ if $linkTxt }}
              {{ i18n "OcdScHeroProvided" . | default "You provided" }}
              <span class="ocd-mono ocd-mono-con-solution"
                >LINK-TEXT="{{ $linkTxt }}"</span
              >
              {{- i18n "OcdScHeroMissingLink" . | default ", but the corresponding link" }}
              (<span class="ocd-mono ocd-mono-con-warning">LINK</span>)
              {{ i18n "OcdScHeroIsMissing" . | default "is missing." }}
            {{- else -}}
              {{ i18n "OcdScHeroProvided" . | default "You provided" }}
              <span class="ocd-mono ocd-mono-con-solution"
                >LINK="{{ $link }}"</span
              >
              {{- i18n "OcdScHeroMissingText" . | default ", but the corresponding text" }}
              (<span class="ocd-mono ocd-mono-con-warning">LINK-TEXT</span>)
              {{ i18n "OcdScHeroIsMissing" . | default "is missing." }}
            {{- end -}}
          </li>
        {{- end }}
      </ul>
      <p>
        {{ i18n "OcdExample" . | default "Example:" }}
        <br />
        <span class="ocd-mono ocd-mono-con-solution"
          >&lbrace;&lbrace;&lt; {{ $scName }}</span
        >
        <br />
        <span class="ocd-mono ocd-mono-con-solution"
          >&nbsp;&nbsp;TITLE="Thoughts & Code"</span
        >
        <br />
        <span class="ocd-mono ocd-mono-con-solution"
          >&nbsp;&nbsp;SUBTITLE="A minimal blog about web, tech, and
          ideas."</span
        >
        <br />
        <span class="ocd-mono ocd-mono-con-solution"
          >&nbsp;&nbsp;BTN-TEXT="Read the Blog"</span
        >
        <br />
        <span class="ocd-mono ocd-mono-con-solution"
          >&nbsp;&nbsp;BTN-LINK="/blog"
        </span>
        <br /><span class="ocd-mono ocd-mono-con-solution"
          >&nbsp;&nbsp;BTN-LABEL="Go to blog posts"</span
        >
        <br />
        <span class="ocd-mono ocd-mono-con-solution"
          >&nbsp;&nbsp;LINK-TEXT="About Me"</span
        >
        <br />
        <span class="ocd-mono ocd-mono-con-solution"
          >&nbsp;&nbsp;LINK="/about"</span
        >
        <br />
        <span class="ocd-mono ocd-mono-con-solution"
          >&nbsp;&nbsp;LINK-LABEL="Learn more about the author"</span
        >
        <br />
        <span class="ocd-mono ocd-mono-con-solution">
          &gt;&rbrace;&rbrace;</span
        >
        <br />
      </p>
    </div>
    <div class="ocd-console-doc">
      <div class="hr hr-left"></div>
      <a href="{{ $docURL }}"
        ><span class="ocd-mono">{{ $scName }}</span> {{ i18n "OcdDoc" }}</a
      >
      <div class="hr hr-right"></div>
    </div>
  </template>
{{- end }}
